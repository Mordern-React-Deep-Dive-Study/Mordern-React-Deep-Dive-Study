# 9장 모던 리액트 개발 도구로 개발 및 배포환경 구축하기

## 9.1 Next.js로 리액트 개발 환경 구축하기

`create-react-app` 과 `create-next-app`은 리액트와 Next.js 애플리케이션을 손쉽게 만들 수 있는 CLI 도구이다.

→ 이 두 가지로 애플리케이션을 빠르게 만들 수 있도록 도와주지만 애플리케이션의 온전한 이해를 위해서는 package.json부터 이해가 필요함

### 9.1.1 create-next-app 없이 하나씩 구축하기

```jsx
npm init
```

**`npm init`**: 이 명령어는 새로운 npm 프로젝트를 초기화합니다. 이 명령을 실행하면 프로젝트에 대한 몇 가지 설정을 입력하라는 프롬프트가 표시되며, 예를 들어 프로젝트의 이름, 버전, 설명 등을 입력할 수 있습니다. 이렇게 초기화된 프로젝트는 **`package.json`** 파일이 생성됩니다.

```jsx
npm i react react-dom next
```

**`npm i react react-dom next`**: 이 명령어는 프로젝트에 React, ReactDOM 및 Next.js를 설치합니다.

- **`react`**: React 라이브러리를 설치합니다. React는 사용자 인터페이스를 구축하기 위한 JavaScript 라이브러리입니다.
- **`react-dom`**: React 애플리케이션에서 DOM을 조작하기 위한 라이브러리입니다.
- **`next`**: Next.js는 React를 기반으로 한 웹 애플리케이션 프레임워크로, 서버 사이드 렌더링 및 라우팅을 지원합니다.

```jsx
npm i @types/node @types/react @types/react-dom elsint eslint-config-next typescript --save-dev
```

**`npm i @types/node @types/react @types/react-dom eslint eslint-config-next typescript --save-dev`**: 이 명령어는 프로젝트의 개발 환경 설정을 위한 패키지들을 설치합니다.

- **`@types/node`**, **`@types/react`**, **`@types/react-dom`**: TypeScript로 작성된 라이브러리들을 위한 타입 정의 패키지입니다. TypeScript를 사용할 때, 이러한 외부 라이브러리의 타입 정보를 가져와 사용할 수 있습니다.
- **`eslint`**: JavaScript 및 TypeScript 코드의 문법 및 코드 스타일을 검사하는 도구입니다.
- **`eslint-config-next`**: Next.js 프로젝트를 위한 ESLint 설정입니다. Next.js 공식 권장 설정을 사용할 수 있습니다.
- **`typescript`**: TypeScript 언어를 지원하기 위한 패키지로, JavaScript에 타입 시스템을 추가하는 역할을 합니다.

**`--save-dev`** 플래그는 이 패키지들이 개발 환경에서만 필요하며, 실제 프로덕션 환경에서는 필요하지 않음을 나타냅니다. 이 패키지들은 **`package.json`** 파일의 **`devDependencies`** 섹션에 추가됩니다.

### 9.1.2 tsconfig.json 작성하기

- `$schema`는 해당 JSON 파일이 무엇을 의미하지는, 어떤키와 어떤값이 들어갈 수 있는지 알려주는 도구이다.

### compilerOptions

타입스크립트를 자바스크립트로 컴파일 하는 경우 사용하는 옵션이다.

- target: 타입스크립트가 변환을 목표로 하는 언어의 버전
- lib: 변환과 다르게 사용 가능한 버전
- allowJS : 타입스크립트가 자바스크립트 파일 또한 컴파일할지 결정
- skipLibCheck: .d.ts파일 검사 여부
- strict: 엄격 모드
  - alwaysStrict : 모든 자바스크립트 파일에 use strict 추가
  - strictNullChecks : 엄격한 Null 검사 활성화. Null과 undefined 구분
- strictFunctionTypes : 함수의 타입에 엄격함을 유지
- strictPropertyInitialization : 클래스 내부의 프로퍼티에 값을 할당할 때 타입이 올바르지 않다면 에러
- noImplicitAny: 변수에 any 자동할당 비활성화
- noImplicitThis : this를 추론할 수 없는 상황에서 any를 할당하는데 이 옵션을 켜면 any로 할당하지 않고 에러
- forceConsistentCasingFileNames :파일 이름의 대소문자를 구분하도록 강제함
- noEmit: 컴파일하지 않고 타입만 체크. Next.js에서는 SWC가 컴파일함
- esModuleInterop: CJS 방식의 모듈을 import 할 수 있게 허용
- module : 모듈 시스템을 설정 ( 대표적으로 commonjs→require 사용, esnext→import사용)
- moduleResolution : 모듈을 해석하는 방식을 설정. node→node_modules를 기준으로 해석, classic→tsconfig.json을 기준으로 해석
- resolveJsonModule : JSON 파일을 import 할 수 있게 해줌.
- isolationModules :타입스크립트 컴파알러는 파일에 import나 export가 없다면 단순 스크립트 파일로 인석해 막는데, 단독으로 있는 파일의 생성을 막기위한 옵션
- jsx: .tsx 파일 내부에 있는 JSX를 어떻게 컴파일할지 설정
  - react: 기본값, React.CreateElement로 변환된다. 16까지의 기본값
  - react-jsx: 17에서 등장, react/jsx-runtime을 사용하여 변환. 이 방식을 사용하면 상단에 `import React from 'react`를 적지 않아도 됨
  - react-jxdev: react-jsx와 동일하지만 디버깅 정보 추가
  - preserve: 변환하지 않고 그대로 유지
  - react-native: react-native에서 사용하는 방식, 변환하지 않고 그대로 유지

### 9.1.3 next.config.js 작성하기

- reactStrictMode : 리액트의 엄격모드를 활성화
- poweredByHeader : 일반적으로 보안 취약점으로 취급되는 X-Powered-By 헤더를 제거
- eslint.ignoreDuringBuilds : 빌드 시에 eslint를 무시한다.

### 9.1.4 ESLint와 Prettier 설정하기

- eslint-config-next로는 부족하다.
- @titicaca/eslint-triple을 설치하면 코드 스타일링등 일반적인 작업을 처리해준다.

### 9.1.5 스타일 설정

styled-component를 사용한다면 next.config.js에 styledComponent 옵션을 true로 바꿔주어 SWC에게 styled-component를 사용한다는 것을 알려주자.

### 9.1.6 애플리케이션 코드 작성

Next.js 애플리케이션 코드는 `src/page`아래 실제 라우팅과 관련된 파일을 기재해야 한다. 폴더 구조에 정답은 없다. 팀에서 잘 정해서 최선의 구조를 사용하자

- pages : 이 폴도 하위의 내용은 모두 실제 라우터가 된다
- components : 페이지 내부에서 사용하는 컴포넌트를 모아둔 폴더
- hooks : 직접 만든 훅을 모아둔 폴더
- types : 서버 응답 타입 등 공통으로 사용하는 타입을 모아두는 폴더
- utils : 애플리케이션 전역에서 공용으로 사용하는 유틸성 파일을 모아두는 폴더
